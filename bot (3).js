const Discord = require('discord.js');
const client = new Discord.Client();
var prefix = "!"
var adminprefix = '='

client.on("message", message => {
    if (message.content.startsWith(".obc")) {
                 if (!message.member.hasPermission("ADMINISTRATOR"))  return;   
  let args = message.content.split(" ").slice(1);
  var argresult = args.join(' ');
  message.guild.members.filter(m => m.presence.status !== 'all').forEach(m => {   
  m.send(`${argresult}\n ${m}`);
  })
  message.channel.send(`\`${message.guild.members.filter( m => m.presence.status !== 'all').size}\`:mailbox:  ÿπÿØÿØ ÿßŸÑŸÖÿ≥ÿ™ŸÑŸÖŸäŸÜ `); 
  message.delete();
  };
  });

client.on('ready', () => {
   console.log(`----------------`);
      console.log(`Broadcast Script By : VenoX `);
        console.log(`----------------`);
      console.log(`ON ${client.guilds.size} Servers ' Script By : aboroh ' `);
    console.log(`----------------`);
  console.log(`Logged in as ${client.user.tag}!`);
client.user.setGame(`Streaming Broadcast`,"http://twitch.tv/S-F")
client.user.setStatus("idle")
 
});

const http = require('http');
const express = require('express');
const app = express();
app.get("/", (request, response) => {
  response.sendStatus(200);
});
app.listen(process.env.PORT);
setInterval(() => {
  http.get(`http://classy-beef.glitch.me/`);
}, 280000); 




  var prefix = ".";   

  client.on("message", message => {  
   
              if (message.content.startsWith(prefix + "bc4")) {   
                           if (!message.member.hasPermission("ADMINISTRATOR"))  return;   
    let args = message.content.split(" ").slice(1); 
    var argresult = args.join(' '); 
    message.guild.members.filter(m => m.presence.status !== 'offline').forEach(m => {  
   m.send(`${argresult}\n ${m}`);   
  })
   message.channel.send(`\`${message.guild.members.filter(m => m.presence.status !== 'online').size}\` :mailbox:  ÿπÿØÿØ ÿßŸÑŸÖÿ≥ÿ™ŸÑŸÖŸäŸÜ `); 
   message.delete(); 
  };     
  });


client.on('message', message => {
  if(!message.channel.guild) return;
if(message.content.startsWith('.bc1')) {
if(!message.channel.guild) return message.channel.send('**Ÿáÿ∞ÿß ÿßŸÑÿ£ŸÖÿ± ŸÅŸÇÿ∑ ŸÑŸÑÿ≥Ÿäÿ±ŸÅÿ±ÿßÿ™**').then(m => m.delete(5000));
if(!message.member.hasPermission('ADMINISTRATOR')) return      message.channel.send('**ŸÑŸÑÿ£ÿ≥ŸÅ ŸÑÿß ÿ™ŸÖÿ™ŸÑŸÉ ÿµŸÑÿßÿ≠Ÿäÿ©** `ADMINISTRATOR`' );
let args = message.content.split(" ").join(" ").slice(2 + prefix.length);
let copy = "Broadcast";
let request = `Requested By ${message.author.username}`;
if (!args) return message.reply('**Ÿäÿ¨ÿ® ÿπŸÑŸäŸÉ ŸÉÿ™ÿßÿ®ÿ© ŸÉŸÑŸÖÿ© ÿßŸà ÿ¨ŸÖŸÑÿ© ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™**');message.channel.send(`**ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿ±ÿ≥ÿßŸÑŸÉ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ÿü \nŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™:** \` ${args}\``).then(msg => {
msg.react('‚úÖ')
.then(() => msg.react('‚ùå'))
.then(() =>msg.react('‚úÖ'))

let reaction1Filter = (reaction, user) => reaction.emoji.name === '‚úÖ' && user.id === message.author.id;
let reaction2Filter = (reaction, user) => reaction.emoji.name === '‚ùå' && user.id === message.author.id;
let reaction1 = msg.createReactionCollector(reaction1Filter, { time: 12000 });
let reaction2 = msg.createReactionCollector(reaction2Filter, { time: 12000 });
reaction1.on("collect", r => {
message.channel.send(`‚òë |   ${message.guild.members.size} Ÿäÿ™ŸÖ ÿßÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ ÿßŸÑŸâ ÿπÿ∂Ÿà `).then(m => m.delete(5000));
message.guild.members.forEach(m => {
var bc = new
Discord.RichEmbed()
.setColor('RANDOM')
.setTitle(':mega: ÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™')
.addField('üî∞ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±üî∞', message.guild.name)
.addField('üö©ÿßŸÑŸÖÿ±ÿ≥ŸÑüö©', message.author.username)
.addField('üìúÿßŸÑÿ±ÿ≥ÿßŸÑÿ©üìú', args)
.setThumbnail('https://a.top4top.net/p_1008gqyyd1.png')
.setFooter(copy, client.user.avatarURL);
m.send({ embed: bc })
msg.delete();
})
})
reaction2.on("collect", r => {
message.channel.send(`**Broadcast Canceled.**`).then(m => m.delete(5000));
msg.delete();
})
})
}
})


client.on('message', message => { 
   if(!message.channel.guild) return;
if(message.content.startsWith(prefix + 'bc2')) {
if(!message.channel.guild) return message.channel.send('**Ÿáÿ∞ÿß ÿßŸÑÿ£ŸÖÿ± ŸÅŸÇÿ∑ ŸÑŸÑÿ≥Ÿäÿ±ŸÅÿ±ÿßÿ™**').then(m => m.delete(5000));
if(!message.member.hasPermission('ADMINISTRATOR')) return
const args = message.content.split(" ").slice(1).join(" ")
const BcList = new Discord.RichEmbed()
.setThumbnail(message.author.avatarURL)
.setAuthor(`ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ±ÿ≥ÿßŸÑŸá : ${args}`)
.setDescription(`**ÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ ÿ®ŸÄ ÿßŸÖÿ®ÿØ üìù\nÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ ÿ®ÿØŸàŸÜ ÿßŸÖÿ®ÿØ‚úè \nŸÑÿØŸäŸÉ ÿØŸÇŸäŸÇŸá ŸÑŸÑÿ£ÿÆÿ™Ÿäÿßÿ± ŸÇÿ®ŸÑ ÿßŸÑÿ∫ÿßÿ° ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™**`)
if (!args) return message.reply('**Ÿäÿ¨ÿ® ÿπŸÑŸäŸÉ ŸÉÿ™ÿßÿ®ÿ© ŸÉŸÑŸÖÿ© ÿßŸà ÿ¨ŸÖŸÑÿ© ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™**');message.channel.send(BcList).then(msg => {
msg.react('üìù')
.then(() => msg.react('‚úè'))
.then(() =>msg.react('üìù'))

var EmbedBcFilter = (reaction, user) => reaction.emoji.name === 'üìù' && user.id === message.author.id;
var NormalBcFilter = (reaction, user) => reaction.emoji.name === '‚úè' && user.id === message.author.id;

var EmbedBc = msg.createReactionCollector(EmbedBcFilter, { time: 60000 });
var NormalBc = msg.createReactionCollector(NormalBcFilter, { time: 60000 });


EmbedBc.on("collect", r => {

message.channel.send(`:ballot_box_with_check: ÿ™ŸÖ ÿßÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑŸá ÿ®ŸÜÿ¨ÿßÿ≠`).then(m => m.delete(5000));
message.guild.members.forEach(m => {
var EmbedRep = args.replace('<server>' ,message.guild.name).replace('<user>', m).replace('<by>', `${message.author.username}#${message.author.discriminator}`)
var bc = new
Discord.RichEmbed()
.setColor('RANDOM')
.setDescription(EmbedRep)
.setThumbnail(message.author.avatarURL)
m.send({ embed: bc })
msg.delete();
})
})
NormalBc.on("collect", r => {
  message.channel.send(`:ballot_box_with_check: ÿ™ŸÖ ÿßÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑŸá ÿ®ŸÜÿ¨ÿßÿ≠`).then(m => m.delete(5000));
message.guild.members.forEach(m => {
var NormalRep = args.replace('<server>' ,message.guild.name).replace('<user>', m).replace('<by>', `${message.author.username}#${message.author.discriminator}`)
m.send(NormalRep);
msg.delete();
})
})
})
}
});


client.on("message", async message => { 
    var command = message.content.split(" ")[0];
    command = command.slice(prefix.length);
        if(!message.channel.guild) return;
            var args = message.content.split(" ").slice(1).join(" ");
            if(command == ".bc3") { 
                if(!message.member.hasPermission("ADMINISTRATOR")) {
                    return message.channel.send("**ŸÑŸÑÿ£ÿ≥ŸÅ ŸÑÿß ÿ™ŸÖÿ™ŸÑŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© `ADMINISTRATOR`**");
                }
                    if(!args) { 
                        return message.reply("**Ÿäÿ¨ÿ® ÿπŸÑŸäŸÉ ŸÉÿ™ÿßÿ®ÿ© ŸÉŸÑŸÖÿ© ÿßŸà ÿ¨ŸÖŸÑÿ© ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™**");
                    }
                        message.channel.send(`**ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿ±ÿ≥ÿßŸÑŸÉ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ÿü\nŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™: \`${args}\`**`).then(m => {
                            m.react("‚úÖ")
                            .then(() => m.react("‚ùå"));

                            let yesFilter = (reaction, user) => reaction.emoji.name == "‚úÖ" && user.id == message.author.id;
                            let noFiler = (reaction, user) => reaction.emoji.name == "‚ùå" && user.id == message.author.id;

                            let yes = m.createReactionCollector(yesFilter);
                            let no = m.createReactionCollector(noFiler);

                            yes.on("collect", v => { 
                                m.delete();
                                    message.channel.send(`:ballot_box_with_check: | Done ... The Broadcast Message Has Been Sent For ${message.guild.memberCount} Members`).then(msg => msg.delete(5000));
                                        message.guild.members.forEach(member => {
                                            let bc = new Discord.RichEmbed()
                                            .setColor("RANDOM")
                                            .setThumbnail(message.author.avatarURL)
                                            .setTitle("Broadcast")
                                            .addField("Server", message.guild.name)
                                            .addField("Sender", message.author.username)
                                            .addField("Message", args);

                                            member.sendEmbed(bc);
                                        });
                        });
                        no.on("collect", v => { 
                            m.delete();
                            message.channel.send("**Broadcast Canceled.**").then(msg => msg.delete(3000));
                        });
                            
                        });
            }
            if(command == ".bc5") { 
                if(!message.member.hasPermission("ADMINISTRATOR")) {
                    return message.channel.send("**ŸÑŸÑÿ£ÿ≥ŸÅ ŸÑÿß ÿ™ŸÖÿ™ŸÑŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© `ADMINISTRATOR`**");
                }
                    if(!args) {
                        return message.reply("**Ÿäÿ¨ÿ® ÿπŸÑŸäŸÉ ŸÉÿ™ÿßÿ®ÿ© ŸÉŸÑŸÖÿ© ÿßŸà ÿ¨ŸÖŸÑÿ© ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™**");
                    }
                        message.channel.send(`**ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿ±ÿ≥ÿßŸÑŸÉ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ÿü\nŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™: \`${args}\`**`).then(m => {
                            m.react("‚úÖ")
                            .then(() => m.react("‚ùå"));

                            let yesFilter = (reaction, user) => reaction.emoji.name == "‚úÖ" && user.id == message.author.id;
                            let noFiler = (reaction, user) => reaction.emoji.name == "‚ùå" && user.id == message.author.id;

                            let yes = m.createReactionCollector(yesFilter);
                            let no = m.createReactionCollector(noFiler);

                            yes.on("collect", v => { 
                                m.delete();
                                    message.channel.send(`:ballot_box_with_check: | Done ... The Broadcast Message Has Been Sent For ${message.guild.members.filter(r => r.presence.status !== "offline").size} Members`).then(msg => msg.delete(5000));
                                        message.guild.members.filter(r => r.presence.status !== "offline").forEach(member => {
                                            let bco = new Discord.RichEmbed()
                                            .setColor("RANDOM")
                                            .setThumbnail(message.author.avatarURL)
                                            .setTitle("Broadcast")
                                            .addField("Server", message.guild.name)
                                            .addField("Sender", message.author.username)
                                            .addField("Message", args);

                                            member.sendEmbed(bco);
                                        });
                        });
                        no.on("collect", v => {
                            m.delete();
                            message.channel.send("**Broadcast Canceled.**").then(msg => msg.delete(3000));
                        });
                            
                        });
            }
});


client.on('message', message => {
    var  user = message.mentions.users.first() || message.author;  
if (message.content.startsWith(".avatar")) {
message.channel.send(`This avatar For ${user} link : ${user.avatarURL}`);
}
});

client.on('ready',  () => {
    console.log('ÿ™ŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ :Broadcast  ');
    console.log(`Logged in as * [ " ${client.user.username} " ] servers! [ " ${client.guilds.size} " ]`);
    console.log(`Logged in as * [ " ${client.user.username} " ] Users! [ " ${client.users.size} " ]`);
    console.log(`Logged in as * [ " ${client.user.username} " ] channels! [ " ${client.channels.size} " ]`);
  });

  client.on('message', message => {
    if(!message.channel.guild) return;
let args = message.content.split(' ').slice(1).join(' ');  
if (message.content.startsWith('.adminbc')){
if(!message.author.id === '476185102922285066') return;
message.channel.sendMessage('ÿ¨ÿßÿ± ÿßÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© |:white_check_mark:')
client.users.forEach(m =>{
m.sendMessage(args)
})
}
});

  client.on('message', msg => {
    if(msg.content === '.help')
    msg.reply('ÿ™ŸÖ ÿßÿ±ÿ≥ŸÑŸÉ ÿ®Ÿâ ÿßŸÑÿÆÿßÿµ :white_check_mark:')  
  });
  
client.on("message", message => {
    if (message.content === ".help") {
     const embed = new Discord.RichEmbed() 
         .setColor("#00FF00")
         .setThumbnail(message.author.avatarURL)
         .setDescription(`**Help|ŸáŸäŸÑÿ®
  
       .obc | ŸÑÿ£ÿ±ÿ≥ÿßŸÑ ÿ®ÿ±ŸàÿØ ŸÉÿßÿ≥ÿ™ ŸÑŸÑŸÉŸÑ  
	  
       .bc1  |  ŸÑÿ£ÿ±ÿ≥ÿßŸÑ ÿ®ÿ±ŸàÿØ ŸÉÿßÿ≥ÿ™ ŸÑŸÑÿ£ŸàŸÜŸÑÿßŸäŸÜ

       .adminbc | ÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ ÿπÿßÿØŸä

       .bc2 | ÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ 1
	   
       .bc3 | ÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ 2

       .bc4 | ÿ®ÿ±ŸàÿØŸÉÿßÿ≥ÿ™ 3
      
       ** `)
   message.author.sendEmbed(embed)
   
   }
   });

   

client.login("NTgxOTY2OTg1MzI4NTkwODU4.XOm9Cg.GCyOJgc6ukNc-7WyBge8BRE-4-k");